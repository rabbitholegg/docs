---
title: "ManagedBudget"
---
import Config from '/snippets/config.mdx';
import ReturnValue from '/snippets/ReturnValue.mdx'

The ManagedBudget is a flexible budget implementation that allows for the distribution of tokens (ERC-20 and native) with role-based access control. A Managed Budget is required to deploy boosts.

<Note>
  For a detailed technical overview of the ManagedBudget class, please refer to the [ManagedBudget TypeDoc](https://boost-protocol.vercel.app/classes/ManagedBudget.html).
</Note>

## Overview

ManagedBudget is designed to hold and distribute assets while providing fine-grained control over who can perform various operations. It supports ETH, ERC-20 based assets.

## Key Features

- Role-based access control for management and administration
- Support for multiple asset types (ETH, ERC-20)
- Flexible allocation and distribution of assets
- Clawback functionality for asset recovery

## Usage

#### Create a new ManagedBudget

**To initialize a new ManagedBudget contract:**

<CodeGroup>
  ```ts index.ts
  import { BoostCore } from '@boostxyz/sdk/BoostCore'
  import { BoostRegistry } from '@boostxyz/sdk/BoostRegistry'
  import { ManagedBudgetRoles } from '@boostxyz/sdk/Budgets/ManagedBudget'
  import { config } from "./config";

  const core = new BoostCore({ config });
  const registry = new BoostRegistry({ config });

  // initialize a new budget contract
  const budget = await registry.initialize(
    "MyBoostBudget",
    core.ManagedBudget({
      owner: account.address,
      authorized: [account.address, core.assertValidAddress()],
      roles: [ManagedBudgetRoles.ADMIN, ManagedBudgetRoles.MANAGER],
    })
  );

  const budgetAddress = budget.assertValidAddress();
  ```
  <Config />
</CodeGroup>

#### Get an existing ManagedBudget

**To get an existing ManagedBudget contract:**

<CodeGroup>
```ts index.ts
const budget = core.ManagedBudget("0xc55F719709bDad022B320E76f9DfF7e6F5680767")

// or if you want a budget from a specific chain
const budgetOnBase = core.ManagedBudget(
  "0xc55F719709bDad022B320E76f9DfF7e6F5680767", 
  { chainId: 8453 }
)
```
</CodeGroup>

<Tip>
  [Learn more about targeting specific chains](/v2/boost-sdk/quick-start#targeting-specific-chains)
</Tip>

### Write Methods

#### Allocate

**To allocate funds to the ManagedBudget:**

The allocate function transfers assets into the budget.

<Warning>
  Before using `allocate`, you must approve the ManagedBudget to spend the asset.
</Warning>

<CodeGroup>
```ts index.ts
import { parseUnits } from "viem";

const budget = core.ManagedBudget("0xc55F719709bDad022B320E76f9DfF7e6F5680767")

// Allocate assets to the budget
await budget.allocate({
  amount: parseUnits('1', 18),
  asset: '0xf3B2d0E4f2d8F453DBCc278b10e88b20d7f19f8D',
  target: account.address,
});
```
</CodeGroup>

> [Types](https://boost-protocol.vercel.app/classes/ManagedBudget.html#allocate)

<ReturnValue value="Promise<boolean>" description="true if the request was successful" />

<Note>
  You can also directly transfer tokens to the ManagedBudget contract address instead of using the `allocate` function. This allows you to bypass the approval process for ERC20 tokens.
</Note>

#### Clawback

**To reclaim funds from the ManagedBudget:**

The clawback function is used to reclaim funds from the budget. Can only be called by owner or admin.

<CodeGroup>
```ts index.ts
const budget = core.ManagedBudget("0xc55F719709bDad022B320E76f9DfF7e6F5680767")

// Perform clawback
await budget.clawback({
  amount: 0n,
  asset: '0xf3B2d0E4f2d8F453DBCc278b10e88b20d7f19f8D',
  target: account.address, // Address to receive the funds
});
```
</CodeGroup>

> [Types](https://boost-protocol.vercel.app/classes/ManagedBudget.html#clawback)

<ReturnValue value="boolean" description="true if the request was successful" />

<Tip>
  - Using `clawback` with `0n` will reclaim all available funds for the given asset.
  - Use the zero address (`0x0000000000000000000000000000000000000000`) to clawback native assets (ie. ETH).
</Tip>

#### Disburse

**To disburse funds from the ManagedBudget:**

Transfers funds from the budget to a specified recipient. You must have the manager, admin or owner role to call this function.

<CodeGroup>
```ts index.ts
import { parseUnits } from "viem";

const budget = core.ManagedBudget("0xc55F719709bDad022B320E76f9DfF7e6F5680767")

// Disburse funds
await budget.disburse({
  amount: parseUnits('1', 18), // Amount to disburse
  asset: '0xf3B2d0E4f2d8F453DBCc278b10e88b20d7f19f8D', // ERC20 token address
  target: '0x865C301c46d64DE5c9B124Ec1a97eF1EFC1bcbd1', // Recipient address
});
```
</CodeGroup>

> [Types](https://boost-protocol.vercel.app/classes/ManagedBudget.html#disburse)

<ReturnValue value="Promise<boolean>" description="true if the request was successful" />

#### DisburseBatch

**To disburse funds to multiple recipients in a single transaction:**

Transfers funds from the budget to a list of specified recipients. You must have the manager, admin or owner role to call this function.

<CodeGroup>
```ts index.ts
import { parseUnits } from "viem";

const budget = core.ManagedBudget("0xc55F719709bDad022B320E76f9DfF7e6F5680767")

// Disburse funds in batch
await budget.disburseBatch([
  {
    amount: parseUnits('1', 18),
    asset: '0xf3B2d0E4f2d8F453DBCc278b10e88b20d7f19f8D',
    target: '0x865C301c46d64DE5c9B124Ec1a97eF1EFC1bcbd1',
  },
  {
    amount: parseUnits('1', 18),
    asset: '0xf3B2d0E4f2d8F453DBCc278b10e88b20d7f19f8D',
    target: '0xC8a29641644d27f28e21d8A2112a3B79fFDc39eC',
  },
]);
```
</CodeGroup>

> [Types](https://boost-protocol.vercel.app/classes/ManagedBudget.html#disburseBatch)

<ReturnValue value="Promise<boolean>" description="true if the request was successful" />

<Note>
  The `disburseBatch` function allows you to disburse funds to multiple recipients in a single transaction, which can be more gas-efficient when dealing with multiple disbursements.
</Note>
